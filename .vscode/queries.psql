SELECT
    row_number() OVER (ORDER BY tap.tglmasuk) AS no,
    tap.tglmasuk AS tanggalmasuk,
    tdp.tglregistrasi AS tanggalregistrasi,
    tap.tglkeluar AS tanggalkeluar,
    tdp.objectpenjaminfk AS penjamin,
    mr.namarekanan AS namarekanan
FROM t_antreanpemeriksaan tap
    LEFT JOIN t_daftarpasien tdp ON tdp.norec = tap.objectdaftarpasienfk
    LEFT JOIN m_rekanan mr ON tdp.objectpenjaminfk = mr.id
WHERE tap.objectdaftarpasienfk = ''
ORDER BY tap.tglmasuk
